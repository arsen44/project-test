Архитектура
Outbox Table в PostgreSQL: Создадим таблицу outbox в PostgreSQL, которая будет хранить события до их обработки и записи в ClickHouse.

Celery Task для обработки Outbox: Создадим фоновую задачу на Celery, которая будет периодически обрабатывать события из outbox и записывать их в ClickHouse.

Интеграция с Django: Интегрируем механизм записи событий в Django, чтобы бизнес-логика могла публиковать события в outbox без прямого взаимодействия с ClickHouse.